import{_ as s,c as n,o as a,a as p}from"./app.1e38c6bd.js";const A=JSON.parse('{"title":"\u90E8\u5C6C\u5230 github \u548C \u8A2D\u5B9A github actions \u81EA\u52D5\u90E8\u5C6C","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u90E8\u5C6C\u5230 github","slug":"\u90E8\u5C6C\u5230-github","link":"#\u90E8\u5C6C\u5230-github","children":[]},{"level":2,"title":"\u8A2D\u5B9A github actions \u81EA\u52D5\u90E8\u5C6C","slug":"\u8A2D\u5B9A-github-actions-\u81EA\u52D5\u90E8\u5C6C","link":"#\u8A2D\u5B9A-github-actions-\u81EA\u52D5\u90E8\u5C6C","children":[]},{"level":2,"title":"deploy.yml \u8A2D\u5B9A\u6CE8\u610F\u4E8B\u9805","slug":"deploy-yml-\u8A2D\u5B9A\u6CE8\u610F\u4E8B\u9805","link":"#deploy-yml-\u8A2D\u5B9A\u6CE8\u610F\u4E8B\u9805","children":[]},{"level":2,"title":"\u53C3\u8003\u8CC7\u6599","slug":"\u53C3\u8003\u8CC7\u6599","link":"#\u53C3\u8003\u8CC7\u6599","children":[]}],"relativePath":"other/vitepress/deploying.md"}'),l={name:"other/vitepress/deploying.md"},e=p(`<h1 id="\u90E8\u5C6C\u5230-github-\u548C-\u8A2D\u5B9A-github-actions-\u81EA\u52D5\u90E8\u5C6C" tabindex="-1">\u90E8\u5C6C\u5230 github \u548C \u8A2D\u5B9A github actions \u81EA\u52D5\u90E8\u5C6C <a class="header-anchor" href="#\u90E8\u5C6C\u5230-github-\u548C-\u8A2D\u5B9A-github-actions-\u81EA\u52D5\u90E8\u5C6C" aria-hidden="true">#</a></h1><h2 id="\u90E8\u5C6C\u5230-github" tabindex="-1">\u90E8\u5C6C\u5230 github <a class="header-anchor" href="#\u90E8\u5C6C\u5230-github" aria-hidden="true">#</a></h2><ul><li><p><code>config.ts</code> \u6216 <code>config.js</code> \u8A2D\u5B9A <code>base</code>\u6307\u5411 repo \u540D\u7A31,\u4F8B\u5982</p><p><a href="https://github.com/username/repoName.git" target="_blank" rel="noreferrer">https://github.com/username/repoName.git</a></p><div class="language-TypeScript"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vitepress</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F07178;">base</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/repoName/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u6839\u76EE\u9304\u65B0\u589E<code>deploy.sh</code> \u8A2D\u5B9A\u8173\u672C</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;">#!/usr/bin/env sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u78BA\u4FDD\u8173\u672C\u9047\u5230\u7684\u932F\u8AA4</span></span>
<span class="line"><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;"> -e</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u6253\u5305</span></span>
<span class="line"><span style="color:#A6ACCD;">pnpm docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u5207\u63DB\u5230\u6253\u5305\u5F8C\u7684\u8CC7\u6599\u593E</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> docs/.vitepress/dist</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u521D\u59CB\u5316\u6253\u5305\u5F8C\u7684\u8CC7\u6599\u593E</span></span>
<span class="line"><span style="color:#A6ACCD;">git init</span></span>
<span class="line"><span style="color:#A6ACCD;">git add -A</span></span>
<span class="line"><span style="color:#A6ACCD;">git commit -m </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">deploy</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># if you are deploying to https://&lt;USERNAME&gt;.github.io</span></span>
<span class="line"><span style="color:#676E95;"># git push -f git@github.com:&lt;USERNAME&gt;/&lt;USERNAME&gt;.github.io.git main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># if you are deploying to https://&lt;USERNAME&gt;.github.io/&lt;REPO&gt;</span></span>
<span class="line"><span style="color:#676E95;"># git push -f git@github.com:&lt;USERNAME&gt;/&lt;REPO&gt;.git main:gh-pages</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># push remote add gh-pages branch</span></span>
<span class="line"><span style="color:#A6ACCD;">git push -f https://github.com/username/repoName.git master:gh-pages</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> -</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div></li><li><p>\u5982\u679C\u662F windows \u53EF\u4EE5\u958B <code>bash</code> , \u57F7\u884C <code>sh deploy.sh</code> \u8DD1\u525B\u525B\u5EFA\u7ACB\u7684 <code>deploy.sh</code> \u8173\u672C</p></li></ul><h2 id="\u8A2D\u5B9A-github-actions-\u81EA\u52D5\u90E8\u5C6C" tabindex="-1">\u8A2D\u5B9A github actions \u81EA\u52D5\u90E8\u5C6C <a class="header-anchor" href="#\u8A2D\u5B9A-github-actions-\u81EA\u52D5\u90E8\u5C6C" aria-hidden="true">#</a></h2><p>\u5DF2\u7D93\u90E8\u5C6C\u5C08\u6848,\u63A5\u4E0B\u4F86\u53EF\u4EE5\u8A2D\u5B9A\u6BCF\u6B21 commit \u5F8C\u57F7\u884C <code>git push</code> \u8B93 remote \u81EA\u52D5\u90E8\u5C6C,\u5C31\u4E0D\u7528\u624B\u52D5\u57F7\u884C,\u4EE5 github actions \u70BA\u4F8B</p><ul><li><p><code>config.ts</code> \u6216 <code>config.js</code> \u8A2D\u5B9A <code>base</code>\u6307\u5411 repo \u540D\u7A31</p></li><li><p>\u6839\u76EE\u9304\u5EFA\u7ACB <code>.github/workflows</code> \u65B0\u589E <code>deploy.yml</code></p><p>\u9019\u88E1\u662F\u7528<code>pnpm</code>\u5EFA\u7ACB\u90E8\u5C6C\u5F8C\u7684\u8A2D\u5B9A</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9CAC;">on</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">push</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">branches</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">master</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">jobs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">deploy</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">runs-on</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ubuntu-latest</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">fetch-depth</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">node-version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Install pnpm</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm i -g pnpm</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install &amp; Build</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm i &amp;&amp; pnpm docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Deploy</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">github_token</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">publish_dir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs/.vitepress/dist</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;"># cname: example.com # if wanna deploy to custom domain</span></span>
<span class="line"></span></code></pre></div></li></ul><h2 id="deploy-yml-\u8A2D\u5B9A\u6CE8\u610F\u4E8B\u9805" tabindex="-1"><code>deploy.yml</code> \u8A2D\u5B9A\u6CE8\u610F\u4E8B\u9805 <a class="header-anchor" href="#deploy-yml-\u8A2D\u5B9A\u6CE8\u610F\u4E8B\u9805" aria-hidden="true">#</a></h2><ul><li><p>\u6C92\u6709\u627E\u5230 <code>pnpm</code>\u7684\u6A94\u6848</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">Error: Unable to locate executable file: pnpm.</span></span>
<span class="line"><span style="color:#A6ACCD;">Please verify either the file path exists</span></span>
<span class="line"><span style="color:#A6ACCD;">or the file can be found within a directory specified by</span></span>
<span class="line"><span style="color:#A6ACCD;">the PATH environment variable.</span></span>
<span class="line"><span style="color:#A6ACCD;">Also check the file mode to verify the file is executable.</span></span>
<span class="line"></span></code></pre></div><p>\u89E3\u6C7A\u65B9\u5F0F \u57F7\u884C <code>uses: actions/setup-node@v3</code> \u6642\u52A0\u4E0A <code>npm i -g pnpm</code> install pnpm</p></li><li><p><code>deploy.yml</code> \u8A2D\u5B9A\u8981\u52A0\u4E0A <code>pnpm i</code>\u4E0B\u8F09 node_modules</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install &amp; Build</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm i &amp;&amp; pnpm docs:build</span></span>
<span class="line"></span></code></pre></div></li><li><p>\u6210\u529F\u5C07\u81EA\u52D5\u90E8\u5C6C\u8A2D\u5B9A\u5F8C,\u5230 github <code>settings =&gt; pages</code> \u8A2D\u5B9A\u975C\u614B\u9801\u9762<br> \u800C\u4E14\u8981\u5C07\u5206\u652F\u5207\u5230 <code>gh-pages</code> \u8CC7\u6599\u593E\u5207\u5230 <code>/root</code>,\u5982\u679C\u5207\u5230 <code>/docs</code> \u6703\u627E\u4E0D\u5230,\u4EE5\u4E0B\u662F\u8A2D\u5B9A\u5728 <code>gh-pages/docs</code> \u7684\u932F\u8AA4\u8A0A\u606F</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">...\u7565</span></span>
<span class="line"><span style="color:#A6ACCD;">Conversion error:</span></span>
<span class="line"><span style="color:#A6ACCD;">Jekyll::Converters::Scss encountered an error</span></span>
<span class="line"><span style="color:#89DDFF;">while</span><span style="color:#A6ACCD;"> converting</span></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">assets/css/style.scss</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">:No such file or directory</span></span>
<span class="line"><span style="color:#A6ACCD;">@ dir_chdir - /github/workspace/docs</span></span>
<span class="line"><span style="color:#A6ACCD;">...\u7565</span></span>
<span class="line"></span></code></pre></div></li></ul><h2 id="\u53C3\u8003\u8CC7\u6599" tabindex="-1">\u53C3\u8003\u8CC7\u6599 <a class="header-anchor" href="#\u53C3\u8003\u8CC7\u6599" aria-hidden="true">#</a></h2><p><a href="https://vitepress.vuejs.org/guide/deploying" target="_blank" rel="noreferrer">vitepress Deploying</a><br><a href="https://github.com/actions/setup-node/issues/530" target="_blank" rel="noreferrer">Error: Unable to locate executable file: pnpm</a><br><a href="https://vitepress.vuejs.org/config/app-configs#base" target="_blank" rel="noreferrer">vitepress base config</a></p>`,10),o=[e];function c(t,r,i,y,D,C){return a(),n("div",null,o)}const F=s(l,[["render",c]]);export{A as __pageData,F as default};
